#!/bin/bash

# Deployment Manual - Gu√≠a paso a paso
# Usa este script si no tienes configurado SSH con claves

echo "======================================"
echo "üìã GU√çA DE DEPLOYMENT MANUAL"
echo "======================================"
echo ""
echo "El JAR ha sido compilado exitosamente en:"
echo "   target/citas-backend-0.0.1-SNAPSHOT.jar"
echo ""
echo "======================================"
echo "PASOS A SEGUIR:"
echo "======================================"
echo ""
echo "1Ô∏è‚É£  Copia el JAR a tu VPS:"
echo "    scp target/citas-backend-0.0.1-SNAPSHOT.jar root@56.125.172.86:/root/mediapp-backend/"
echo ""
echo "2Ô∏è‚É£  Con√©ctate a tu VPS:"
echo "    ssh root@56.125.172.86"
echo ""
echo "3Ô∏è‚É£  Una vez conectado, ejecuta estos comandos:"
echo "    cd /root/mediapp-backend"
echo "    systemctl restart mediapp-backend"
echo "    systemctl status mediapp-backend"
echo ""
echo "4Ô∏è‚É£  Verifica que est√© funcionando:"
echo "    curl http://localhost:8080/actuator/health"
echo ""
echo "5Ô∏è‚É£  Sal de la VPS:"
echo "    exit"
echo ""
echo "======================================"
echo "URLs para verificar (desde tu navegador):"
echo "======================================"
echo ""
echo "   üåê Health Check: http://56.125.172.86:8080/actuator/health"
echo "   üìö Swagger UI: http://56.125.172.86:8080/swagger-ui.html"
echo "   üìÑ API Docs: http://56.125.172.86:8080/v3/api-docs"
echo ""
echo "======================================"
echo "¬øQuieres continuar con el deployment manual? (y/n)"
read -r response

if [[ "$response" =~ ^[Yy]$ ]]; then
    echo ""
    echo "üì§ Copiando JAR a VPS..."
    echo "   (Se te pedir√° la contrase√±a de root@56.125.172.86)"
    echo ""
    scp target/citas-backend-0.0.1-SNAPSHOT.jar root@56.125.172.86:/root/mediapp-backend/
    
    echo ""
    echo "‚úÖ Archivo copiado!"
    echo ""
    echo "üîÑ Ahora con√©ctate a tu VPS y reinicia el servicio:"
    echo ""
    echo "    ssh root@56.125.172.86"
    echo "    cd /root/mediapp-backend"
    echo "    systemctl restart mediapp-backend"
    echo "    systemctl status mediapp-backend"
    echo ""
else
    echo ""
    echo "‚ùå Deployment cancelado"
    echo "   El JAR compilado est√° disponible en: target/citas-backend-0.0.1-SNAPSHOT.jar"
    echo ""
fi
